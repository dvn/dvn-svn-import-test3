<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:jsp="http://java.sun.com/JSP/Page"
      xmlns:ice="http://www.icesoft.com/icefaces/component">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
</head>
<body>
  <ui:composition template="/template.xhtml">
    <ui:param name="pageTitle" value="#{bundlePageInfo.editGuestBookQuestionnaireTitle} - #{VDCRequest.dataversePageTitle}"/>
    <ui:define name="metadata">
        <f:metadata>
             <f:event type="preRenderView" listener="#{EditGuestbookQuestionnairePage.preRenderView}"/>
        </f:metadata>
    </ui:define>
    <ui:define name="body">
      <ice:form id="form1">
        <ice:inputHidden id="vdcId" value="#{VDCRequest.currentVDCId}"/>
        <div class="dvn_section">
          <div class="dvn_sectionTitle">
            <ice:outputText value="#{bundlePageInfo.editGuestBookQuestionnaireTitle}"/>
          </div>
          <div class="dvn_sectionBox dvnEditTermsForm">
            <div class="dvn_margin12">
              <div jsfc="ice:panelGroup" styleClass="dvnInformationMessage">
                <div class="dvnMsgBlockContainer">
                  <ice:outputText value="#{bundlePageInfo.editGuestBookQuestionnaireHelp}" escape="false"/>
                </div>
              </div>

              <ice:message for="warningMessage" styleClass="warningMessage" id="warningMessage"/>
              
              <div class="dvnGuestBookCheckbox">
                  <ice:selectBooleanCheckbox value="#{EditGuestbookQuestionnairePage.guestBookQuestionnaire.enabled}"/>
                <ice:outputText value=" Enable Guest Book "/>
              </div>
              <div></div>
              
              <div class="dvnGuestBookFirstNameInputLevel">
                    <ice:outputText value="Require User Information"  styleClass="vdcEditStudyField"/>
              </div>
              
              <div class="dvnGuestBookFirstNameInputLevel">
                    <ice:selectBooleanCheckbox value="#{EditGuestbookQuestionnairePage.guestBookQuestionnaire.firstNameRequired}"/>
                    <ice:outputText value="First Name "  styleClass="vdcEditStudyField"/>

              </div>
              
              <div class="dvnGuestBookLastNameInputLevel">
                    <ice:selectBooleanCheckbox value="#{EditGuestbookQuestionnairePage.guestBookQuestionnaire.lastNameRequired}"/>
                    <ice:outputText value="Last Name "  styleClass="vdcEditStudyField"/>
              </div>
              
              <div class="dvnGuestBookEMailInputLevel">
                    <ice:selectBooleanCheckbox value="#{EditGuestbookQuestionnairePage.guestBookQuestionnaire.emailRequired}"/>
                    <ice:outputText value="E-Mail "  styleClass="vdcEditStudyField"/>
              </div>

              <div class="dvnGuestBookInstitutionInputLevel">
                <ice:selectBooleanCheckbox value="#{EditGuestbookQuestionnairePage.guestBookQuestionnaire.institutionRequired}"/>
                <ice:outputText value=" Institution  "/>
              </div>

              <div class="dvnGuestBookPositionInputLevel">
                <ice:selectBooleanCheckbox value="#{EditGuestbookQuestionnairePage.guestBookQuestionnaire.positionRequired}"/>
                <ice:outputText value=" Position"/>
              </div>
              
                <ice:panelGrid cellpadding="0" cellspacing="0" columns="1" width="100%">
                    <ice:column>
                        <p>
                          <ice:graphicImage value="/resources/images/icon_info.gif" styleClass="dvn_icon"/>
                          <ice:outputText styleClass="vdcHelpText" value=" #{bundlePageInfo.editGuestBookAddQuestionHelp}" escape="false"/>
                        </p>
                        <div>
                            <ice:outputText value="Custom Field "/>
                            <ice:inputText id="input_questionText" size="140" binding="#{EditGuestbookQuestionnairePage.inputCustomQuestionText}"></ice:inputText>
                            <ice:selectOneMenu immediate="false" partialSubmit="false" value="#{EditGuestbookQuestionnairePage.questionType}">
                                <f:selectItems value="#{EditGuestbookQuestionnairePage.questionTypeSelectItems}"/>
                            </ice:selectOneMenu>
                        </div>
                        <div class="dvnFormPadding">
                            <ice:commandButton partialSubmit="true" value="Add Custom Field" action="#{EditGuestbookQuestionnairePage.addCustomQuestion}"/>
                        </div>
                        <div jsfc="ice:panelGroup" styleClass="dvnWarningMessage" rendered="#{!empty VDCRender.flash.customQuestionWarningMessage}">
                          <div class="dvnMsgBlockContainer">
                            <p><ice:outputText id="addFieldMessage" value="#{VDCRender.flash.customQuestionWarningMessage}"/></p>
                          </div>
                        </div>

                    </ice:column>
                </ice:panelGrid>                                 
                  <ice:dataTable cellpadding="0" cellspacing="0" width="100%" 
                                  columnClasses="vdcEditStudyCol1, vdcEditStudyCol2, vdcEditStudyCol3"
                                  binding="#{EditGuestbookQuestionnairePage.customQuestionsDataTable}"
                                  value="#{EditGuestbookQuestionnairePage.guestBookQuestionnaire.customQuestions}" var="customQuestion">
                    <ice:column styleClass="vdcEditStudyField">
                       <ice:selectBooleanCheckbox value="#{customQuestion.required}"/>
                       <ice:outputText  value="#{customQuestion.questionString}"  />
                       
                      <ice:dataTable cellpadding="0" cellspacing="0" width="100%" 
                                  columnClasses="vdcEditStudyCol1, vdcEditStudyCol2, vdcEditStudyCol3"                                  
                                  value="#{customQuestion.customQuestionValues}" var="value">
                          <ice:column>
                            <div jsfc="ice:panelGroup" styleClass="vdcEditStudyFieldFloatWrap">               
                              <div jsfc="ice:panelGroup" styleClass="vdcEditStudyFieldFloat1" >
                                <ice:outputText styleClass="dvnInlineHelpLabel dvnInlineHelpTip" value="Answer " />
                                <ice:inputText id="input_AnswerValue"
                                               value="#{value.valueString}"
                                               size="45"
                                               maxlength="255"
                                               required="true" requiredMessage="This field is required." />
                                <ice:message styleClass="errorMessage" for="input_AnswerValue"/>
                              </div>
                            </div>
                          </ice:column>
                          <ice:column>
                            <ice:commandButton image="/resources/images/icon_add.gif" actionListener="#{EditGuestbookQuestionnairePage.addCustomRow}"/>
                            <ice:commandButton 
                                rendered="#{customQuestion.customQuestionValues.size() > 1}" 
                                image="/resources/images/icon_remove.gif" actionListener="#{EditGuestbookQuestionnairePage.removeCustomRow}" />
                          </ice:column>  
                          
                       
                       </ice:dataTable>
                    </ice:column>

                    <ice:column>
                        <ice:commandLink value="Remove" rendered="#{EditGuestbookQuestionnairePage.questionRemovable}" 
                                         actionListener="#{EditGuestbookQuestionnairePage.removeCustomQuestion}"/>
                    </ice:column>
                  </ice:dataTable>

              <div class="dvnFormPadding dvnFormMargin">
                <ice:commandButton id="button1" value="Save" action="#{EditGuestbookQuestionnairePage.save_action}"/>
                <ice:commandButton id="button2" value="Cancel" action="#{EditGuestbookQuestionnairePage.cancel_action}"/>
              </div>
            </div>
          </div>
        </div>
      </ice:form>
    </ui:define>
  </ui:composition>
</body>
</html>
