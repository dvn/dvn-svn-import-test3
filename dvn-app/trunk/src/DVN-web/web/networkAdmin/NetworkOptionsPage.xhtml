<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:jsp="http://java.sun.com/JSP/Page"
      xmlns:ace="http://www.icefaces.org/icefaces/components"
      xmlns:ice="http://www.icesoft.com/icefaces/component">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
</head>
<body>
    <ui:composition template="/template.xhtml">
        <ui:param name="pageTitle" value="Dataverse Network Admin Options - #{VDCRequest.dataversePageTitle}"/>
        <ui:define name="metadata">
            <f:metadata>
                <f:event type="preRenderView" listener="#{OptionsPage.preRenderView}"/>  
                <f:viewParam name="oauth_verifier" value="#{OptionsPage.twitterVerifier}"/>
            </f:metadata>
        </ui:define> 
        <ui:define name="body">
            <ice:form id="form1" rendered="#{VDCRequest.currentVDC == null}">
            <div class="dvn_section">
                <ice:panelTabSet id="tabSet1" styleClass="dvnTabs">
                    <!-- DATAVERSE OPTIONS -->   
                    <ice:panelTab id="networkOptions" label="Dataverses" url="/dvn#{VDCRequest.currentVDCURL}/faces/networkAdmin/NetworkOptionsPage.xhtml&amp;tab=dataverseOptions" rendered="#{VDCSession.loginBean.networkAdmin}">

                            <div jsfc="ice:panelGroup" id="layoutPanel5" label="Dataverses" panelLayout="flow">
                                <ice:panelTabSet id="tabSetDataverses" styleClass="dvnTabs dvnSubTabs">
                                    <!-- Create New -->
                                    <ice:panelTab id="manageDvsSub" label="Dataverses">
                                        <div jsfc="ice:panelGroup">
                                            <div jsfc="ice:panelGroup" panelLayout="flow">
                                                <ui:include src="/networkAdmin/ManageDataversesPage.xhtml"></ui:include>
                                            </div> 
                                        </div>
                                    </ice:panelTab>
                                     <ice:panelTab id="reviewComments" label="Study Comments">
                                        <div jsfc="ice:panelGroup">
                                            <div jsfc="ice:panelGroup" panelLayout="flow">
                                                <ui:include src="/networkAdmin/CommentReviewPage.xhtml"></ui:include>
                                            </div> 
                                        </div>
                                    </ice:panelTab>
                                </ice:panelTabSet>
                            </div>
          
                      </ice:panelTab>
                      
                      <ice:panelTab id="networkSettingsTab" label="Settings" url="/dvn#{VDCRequest.currentVDCURL}/faces/networkAdmin/NetworkOptionsPage.xhtml&amp;tab=settings" rendered="#{VDCSession.loginBean.networkAdmin}">
                         <ice:panelTabSet id="tabSetSettings" styleClass="dvnTabs dvnSubTabs">
                             <ice:panelTab id="networkGeneralSettings" label="General">
                                 <div jsfc="ice:panelGroup">
                                     <ui:include src="/networkAdmin/EditNetworkNamePage.xhtml"></ui:include>
                                     <ui:include src="/networkAdmin/EditNetworkAnnouncementsPage.xhtml"></ui:include>
                                     <ui:include src="/admin/EditContactUsPage.xhtml"></ui:include>
                                     <table class="dvnOptionsTable" cellspacing="0" cellpadding="0" border="0">
                                        <tr>
                                            <td class="dvnOptionsTableOption">
                                                <ice:outputText rendered="#{MainLayoutBean.googleAnalyticsKey == null }"
                                                                value="Google Analytics"/>
                                                <ice:outputLink rendered="#{MainLayoutBean.googleAnalyticsKey != null }"
                                                                id="siteStatslink"
                                                                value="http://www.google.com/analytics/"
                                                                target="_blank">
                                                    <ice:outputText value="#{bundlePageInfo.webStatsTitle}"/>
                                                </ice:outputLink>
                                            </td>
                                            <td>
                                                <ice:outputText styleClass="dvnOptionsTableNote" rendered="#{MainLayoutBean.googleAnalyticsKey != null }" value="#{bundlePageInfo.webStatsText}"/>
                                                <ice:outputText styleClass="dvnOptionsTableNote" rendered="#{MainLayoutBean.googleAnalyticsKey == null }"
                                                                id="siteStatsText"
                                                                value="NOTE: Google Analytics is not configured for this Dataverse Network"/>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td class="dvnOptionsTableOption">
                                                <ice:outputText value="Dataverse Network Version"/>
                                            </td>
                                            <td>
                                                <ice:outputText styleClass="dvnOptionsTableNote" value="#{VersionPage.versionNumber} build number #{VersionPage.bambooBuild}"/>
                                                <ice:outputText value=" - "/>
                                                <ice:outputLink value="http://thedata.org/book/software-license" target="_blank">
                                                    <ice:outputText value="License Information"/>
                                                </ice:outputLink>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td class="dvnOptionsTableOption">
                                                <ice:outputText value="Served by"/>
                                            </td>
                                            <td><ice:outputText styleClass="dvnOptionsTableNote" value="#{VersionPage.serverName}"/></td>
                                        </tr>
                                     </table>
                                     <div id="groupPanel6" class="dvnFormPadding dvnFormMargin">
                                         <ice:commandButton id="btnSaveSettings" value="#{bundle.saveButtonLabel} Changes" action="#{OptionsPage.saveNetworkGeneralSettings_action}"/>
                                     </div>
                                 </div>
                             </ice:panelTab>
                            <ice:panelTab id="networkAdvancedSettings" label="Advanced">
                                 <ui:include src="/networkAdmin/EditNetworkDVRequirementsPage.xhtml"></ui:include>
                                 <div id="groupPanelAdvanced" class="dvnFormPadding dvnFormMargin">
                                    <ice:commandButton id="btnSaveAdvanced" value="#{bundle.saveButtonLabel} Changes" action="#{OptionsPage.saveNetworkAdvancedSettings_action}"/>
                                 </div>
                            </ice:panelTab>
                            <ice:panelTab id="networkCustomizartionSettings" label="Customization">
                                 <ui:include src="/admin/EditBannerFooterPage.xhtml"></ui:include>
                                 <div class="dvnFormPadding dvnFormMargin">
                                    <ice:commandButton id="saveButton" value="Save" action="#{OptionsPage.saveNetworkCustomization}"/>  
                                 </div>
                            </ice:panelTab>
                            <ice:panelTab id="twitterSettings" label="Promote Your Network" rendered="#{OptionsPage.twitterConfigured}">
                                <table class="dvnOptionsTable" cellspacing="0" cellpadding="0" border="0">
                                        <tr>
                                            <td class="dvnOptionsTableOption">
                                                <ice:outputText value="Sync Twitter"/>
                                            </td>
                                            <td>
                                                <ice:outputText styleClass="dvnOptionsTableNote" value="Enable or disable automatic tweets"/>
                                                <ice:commandLink action="#{OptionsPage.authorizeTwitter}" rendered="#{!OptionsPage.twitterEnabled}">
                                                     <ice:outputText value="Enable Twitter"/>
                                                 </ice:commandLink>
                                                 <ice:commandLink action="#{OptionsPage.removeTwitter}" rendered="#{OptionsPage.twitterEnabled}">
                                                     <ice:outputText value="Disable Twitter"/>
                                                 </ice:commandLink>
                                            </td>
                                        </tr>
                                </table>
                            </ice:panelTab>
                        </ice:panelTabSet>

                      </ice:panelTab>

                      <ice:panelTab id="collections" label="Classifications" url="/dvn#{VDCRequest.currentVDCURL}/faces/networkAdmin/NetworkOptionsPage.xhtml&amp;tab=classifications" rendered="#{VDCSession.loginBean.networkAdmin}">

                            <ice:panelTab id="manageClassifications" label="Manage Classifications">
                                <div jsfc="ice:panelGroup">
                                    <div jsfc="ice:panelGroup" panelLayout="flow">
                                        <ui:include src="/networkAdmin/ManageClassificationsPage.xhtml"></ui:include>
                                    </div> 
                                </div>
                            </ice:panelTab>

                      </ice:panelTab> 

                      <ice:panelTab id="templates" label="Templates" url="/dvn#{VDCRequest.currentVDCURL}/faces/networkAdmin/NetworkOptionsPage.xhtml&amp;tab=templates" rendered="#{VDCSession.loginBean.networkAdmin}">

                            <ice:panelTab id="manageTemplates" label="Manage Templates">
                                <div jsfc="ice:panelGroup">
                                    <div jsfc="ice:panelGroup" panelLayout="flow">
                                        <ui:include src="/admin/ManageTemplatesPage.xhtml"></ui:include>
                                    </div> 
                                </div>
                            </ice:panelTab>

                      </ice:panelTab> 

                      <ice:panelTab id="controlledVocab" label="Vocabulary" url="/dvn#{VDCRequest.currentVDCURL}/faces/networkAdmin/NetworkOptionsPage.xhtml&amp;tab=vocabulary" rendered="#{VDCSession.loginBean.networkAdmin}">

                            <ice:panelTab id="manageControlledVocabulary" label="Manage Controlled Vocabulary">
                                <div jsfc="ice:panelGroup">
                                    <div jsfc="ice:panelGroup" panelLayout="flow">
                                        <ui:include src="/admin/ManageControlledVocabularyPage.xhtml"></ui:include>
                                    </div> 
                                </div>
                            </ice:panelTab>

                      </ice:panelTab>

                     <ice:panelTab id="harvestOptions" label="Harvesting" url="/dvn#{VDCRequest.currentVDCURL}/faces/networkAdmin/NetworkOptionsPage.xhtml&amp;tab=harvestOptions" 
                                  rendered="#{VDCSession.loginBean.networkAdmin}">
                        <ice:panelTabSet id="tabSetHarvest" styleClass="dvnTabs dvnSubTabs">
                            <ice:panelTab id="manageHarvestSites" label="Harvesting Dataverses">
                                <div jsfc="ice:panelGroup">
                                    <div jsfc="ice:panelGroup" panelLayout="flow">
                                        <ui:include src="/site/HarvestSitesPage.xhtml"></ui:include>
                                    </div> 
                                </div>
                            </ice:panelTab>
                            <ice:panelTab id="manageOAIHarvestingSets" label="OAI Harversting Sets">
                                <div jsfc="ice:panelGroup">
                                    <div jsfc="ice:panelGroup" panelLayout="flow">
                                        <ui:include src="/networkAdmin/OAISetsPage.xhtml"></ui:include>
                                    </div> 
                                </div>
                            </ice:panelTab>
                            <ice:panelTab id="editExportSchedule" label="Settings">
                                <div jsfc="ice:panelGroup">
                                    <div jsfc="ice:panelGroup" panelLayout="flow">
                                        <ui:include src="/networkAdmin/EditExportSchedulePage.xhtml"></ui:include>
                                    </div> 
                                    <div jsfc="ice:panelGroup" panelLayout="flow">
                                        <ui:include src="/admin/EditLockssConfigPage.xhtml"></ui:include>
                                    </div> 
                                </div>
                            </ice:panelTab>
                        </ice:panelTabSet>
                     </ice:panelTab>

                     <ice:panelTab id="permissions" label="Permissions" url="/dvn#{VDCRequest.currentVDCURL}/faces/networkAdmin/NetworkOptionsPage.xhtml&amp;tab=permissions" rendered="#{VDCSession.loginBean.networkAdmin or VDCSession.loginBean.curatorOrAbove or (not VDCRequest.currentVDC.harvestingDv and (VDCSession.loginBean.contributor or VDCRequest.currentVDC.allowRegisteredUsersToContribute))}">
                            <div jsfc="ice:panelGroup" id="layoutPanelGroupPermissions" panelLayout="flow">
                                <ice:panelTabSet id="tabSetPermissions" styleClass="dvnTabs dvnSubTabs">
                                    <!-- PERMISSIONS -->
                                    <ice:panelTab id="permissionsSub" label="Permissions">
                                            <div jsfc="ice:panelGroup" panelLayout="flow">
                                                <ui:include src="/networkAdmin/NetworkPrivilegedUsersPage.xhtml"></ui:include>
                                            </div>  
                                    </ice:panelTab>
                                    <ice:panelTab id="usersSub" label="Users">
                                            <div jsfc="ice:panelGroup" panelLayout="flow">
                                                <ui:include src="/networkAdmin/AllUsersPage.xhtml"></ui:include>
                                            </div>  
                                    </ice:panelTab>
                                    <ice:panelTab id="groupsSub" label="Groups">
                                            <div jsfc="ice:panelGroup" panelLayout="flow">
                                                <ui:include src="/networkAdmin/UserGroupsPage.xhtml"></ui:include>
                                            </div>  
                                    </ice:panelTab>

                                    <!-- Add Account-->
                                    <ice:panelTab id="addAccountSub" label="Add Account">
                                            <div jsfc="ice:panelGroup" panelLayout="flow">
                                                <ui:include src="/login/AddAccountPage.xhtml"></ui:include>
                                            </div>  
                                    </ice:panelTab>
                                    <!-- TERMS -->
                                    <ice:panelTab id="termsSub" label="Terms">
                                        <div jsfc="ice:panelGroup">   
                                           <div jsfc="ice:panelGroup" panelLayout="flow">
                                                <ui:include src="/networkAdmin/EditAccountUseTermsPage.xhtml"></ui:include>
                                            </div>    
                                             <div jsfc="ice:panelGroup" panelLayout="flow">
                                                <ui:include src="/networkAdmin/EditNetworkDepositUseTermsPage.xhtml"></ui:include>
                                            </div> 
                                            <div jsfc="ice:panelGroup" panelLayout="flow">
                                                <ui:include src="/networkAdmin/EditNetworkDownloadUseTermsPage.xhtml"></ui:include>
                                            </div>

                                            <div class="dvnFormPadding dvnFormMargin">
                                                <ice:commandButton  styleClass="dvnListenSave" value="Save Changes" action="#{OptionsPage.save_NetworkTermsOfUseAction}"/>
                                                <!--<ice:commandButton  value="Cancel" action="#{OptionsPage.toucancel_action}"/>-->
                                            </div>
                                        </div>
                                    </ice:panelTab>
                                    <ice:panelTab id="downloadDataSub" label="Download Tracking Data">
                                        <div jsfc="ice:panelGroup">
                                            <div jsfc="ice:panelGroup" panelLayout="flow">
                                                <ui:include src="/admin/GuestBookResponseDataPage.xhtml"></ui:include>
                                            </div> 
                                        </div>
                                    </ice:panelTab>
                                </ice:panelTabSet>
                            </div>
                        </ice:panelTab>                          
                        <ice:panelTab id="utilties" label="Maintenance" url="/dvn#{VDCRequest.currentVDCURL}/faces/networkAdmin/NetworkOptionsPage.xhtml&amp;tab=utilities" rendered="#{VDCSession.loginBean.networkAdmin}">
                                <div jsfc="ice:panelGroup" id="layoutPanelGroupUtilities" panelLayout="flow">
                                    <ice:panelTabSet id="tabSetUtilities" styleClass="dvnTabs dvnSubTabs">
                                        <ice:panelTab id="studyLockOptions" label="StudyLock"  rendered="#{VDCSession.loginBean.networkAdmin}">
                                            <ice:panelGroup styleClass="dvnUtilitiesTable" >
                                                <ice:messages id="studyLockMessage" styleClass="errorMessage"/>
                                                <ice:outputText value="Current Locks:"/>
                                                <ice:dataTable value="#{OptionsPage.studyLockList}" var="studyLock" width="100%">
                                                    <ice:column>
                                                        <f:facet name="header">
                                                            <ice:outputText value="Study Id"/>
                                                        </f:facet>
                                                        <ice:outputText value="#{studyLock.study.id}"/>
                                                    </ice:column>
                                                    <ice:column>
                                                        <f:facet name="header">
                                                            <ice:outputText value="User Name"/>
                                                        </f:facet>
                                                        <ice:outputText value="#{studyLock.user.userName}"/>
                                                    </ice:column>
                                                    <ice:column>
                                                        <f:facet name="header">
                                                            <ice:outputText value="Start Time"/>
                                                        </f:facet>
                                                        <ice:outputText value="#{studyLock.startTime}"/>
                                                    </ice:column>
                                                    <ice:column>
                                                        <f:facet name="header">
                                                            <ice:outputText value="Detail"/>
                                                        </f:facet>
                                                        <ice:outputText value="#{studyLock.detail}"/>
                                                    </ice:column>
                                                </ice:dataTable>
                                                <hr/>
                                                <ice:outputText value="To remove a study lock, input the study id and click on the button below:"/>
                                                <div>
                                                    <ice:inputText value="#{OptionsPage.studyLockStudyId}" size="6"/>
                                                    <ice:commandButton value="Remove Lock" action="#{OptionsPage.removeLock_action}"/>
                                                </div>
                                            </ice:panelGroup>          
                                        </ice:panelTab>   
                                        <ice:panelTab id="indexUtilties" label="Index" rendered="#{VDCSession.loginBean.networkAdmin}">
                                            <ice:panelGroup styleClass="dvnUtilitiesTable" >
                                                <ice:messages id="indexMessage" styleClass="errorMessage"/>
                                                <ice:outputText value="To reindex all studies, click on the button below (please note: the index directory must be empty before 'index all' can be run):"/>
                                                <div>
                                                    <ice:commandButton value="Index All" action="#{OptionsPage.indexAll_action}"/>
                                                </div>
                                                <hr/>
                                                <ice:outputText value="To index studies owned by a specific dataverse, input the dataverse id and click on the button below:"/>
                                                <div>
                                                    <ice:inputText value="#{OptionsPage.indexDVId}" size="6"/>
                                                    <ice:commandButton value="Index Dataverse" action="#{OptionsPage.indexDV_action}"/>
                                                </div>
                                                <hr/>
                                                <ice:outputText value="To index arbitrary studies, input the study ids and click on the button below:"/>
                                                <div>
                                                    <ice:inputTextarea value="#{OptionsPage.indexStudyIds}" rows="8" cols="80"/>
                                                    <div class="dvnFormPadding">
                                                        <ice:commandButton value="Index Studies" action="#{OptionsPage.indexStudies_action}"/>
                                                    </div>
                                                </div>
                                                <hr/>
                                                <ice:outputText value="To index unindexed studies, click on the button below:"/>
                                                <div>
                                                    <ice:commandButton value="Index Update" action="#{OptionsPage.indexBatch_action}"/>
                                                </div>
                                                <hr/>
                                                <ice:outputText value="#{OptionsPage.indexLocks}"/>
                                                <div class="dvnFormPadding">
                                                    <ice:commandButton value="Delete Lock" action="#{OptionsPage.indexLocks_action}" disabled="#{OptionsPage.deleteLockDisabled}"/>
                                                </div>
                                            </ice:panelGroup>         
                                        </ice:panelTab>
                                        <ice:panelTab id="exportOptions" label="Export" rendered="#{VDCSession.loginBean.networkAdmin}">
                                            <ice:panelGroup styleClass="dvnUtilitiesTable" >
                                                <ice:messages id="exportMessage" styleClass="errorMessage"/>
                                                <ice:outputText value="To run export now (all updated studies in all formats will be exported and update harvest studies will be run), click on the button below:"/>
                                                <div>
                                                    <ice:commandButton value="Run Export" action="#{OptionsPage.exportUpdated_action}"/>
                                                </div>
                                                <hr/>
                                                <ice:outputText value="To update harvest studies, click on the button below:"/>
                                                <div>
                                                    <ice:commandButton value="Update Harvest Studies" action="#{OptionsPage.updateHarvestStudies_action}"/>
                                                </div>
                                                <hr/>
                                                <ice:outputText value="OR, for a CUSTOM export (note: harvest studies will NOT be updated), select export format, then either:"/>
                                                <ice:selectOneMenu id="dropdown1" value="#{OptionsPage.exportFormat}">
                                                    <f:selectItem itemLabel="Export all formats" itemValue=""/>
                                                    <f:selectItem itemLabel="- Export DDI only" itemValue="ddi"/>
                                                    <f:selectItem itemLabel="- Export Dublin Core only" itemValue="oai_dc"/>
                                                    <f:selectItem itemLabel="- Export Marc only" itemValue="marc"/>
                                                </ice:selectOneMenu>
                                                <hr/>
                                                <ice:outputText value="a) export all studies (regardless of update time), click the button below:"/>
                                                <div>
                                                    <ice:commandButton  value="Export All" action="#{OptionsPage.exportAll_action}"/>
                                                </div>
                                                <hr/>
                                                <ice:outputText value="b) export studies owned by a specific dataverse (regardless of update time), input the dataverse id and click on the button below:"/>
                                                <div>
                                                    <ice:inputText value="#{OptionsPage.exportDVId}" size="6"/>
                                                    <ice:commandButton value="Export Dataverse" action="#{OptionsPage.exportDV_action}"/>
                                                </div>
                                                <hr/>
                                                <ice:outputText value="c) export arbitrary studies (regardless of update time), input the study ids and click on the button below:"/>
                                                <div>
                                                    <ice:inputTextarea value="#{OptionsPage.exportStudyIds}" rows="8" cols="80"/>
                                                    <div class="dvnFormPadding">
                                                        <ice:commandButton value="Export Studies" action="#{OptionsPage.exportStudies_action}"/>
                                                    </div>
                                                </div>
                                            </ice:panelGroup>         
                                        </ice:panelTab> 
                                        <ice:panelTab id="harvestOptions" label="Harvest"  rendered="#{VDCSession.loginBean.networkAdmin}">
                                            <ice:panelGroup styleClass="dvnUtilitiesTable">
                                                <ice:messages id="harvestMessage"  styleClass="errorMessage"/>
                                                <ice:outputText value="To harvest a specific study, input the DV and the harvest identifier, and click on the button below:"/>
                                                <div jsfc="ice:panelGroup">
                                                <ice:selectOneMenu value="#{OptionsPage.harvestDVId}">
                                                    <f:selectItems value="#{OptionsPage.harvestDVs}"/>
                                                </ice:selectOneMenu>
                                                <ice:inputText value="#{OptionsPage.harvestIdentifier}" size="60"/>
                                                <ice:commandButton value="Harvest Study" action="#{OptionsPage.harvestStudy_action}"/>
                                                </div>
                                            </ice:panelGroup>         
                                        </ice:panelTab> 
                                        <ice:panelTab id="fileOptions" label="File"  rendered="#{VDCSession.loginBean.networkAdmin}">
                                            <ice:panelGroup styleClass="dvnUtilitiesTable">
                                                <ice:messages id="fileMessage" styleClass="errorMessage"/>
                                                <ice:outputText value="To determine the file types for files with a particular extension:"/>
                                                <div jsfc="ice:panelGroup">
                                                <ice:inputText value="#{OptionsPage.fileExtension}" size="6"/>
                                                <ice:commandButton value="Determine File Types for Extension" action="#{OptionsPage.determineFileTypeForExtension_action}"/>
                                                </div>
                                                <hr/>
                                                <ice:outputText value="To determine the file types for files in arbitrary studies, input the study ids and click on the button below:"/>
                                                <div>
                                                    <ice:inputTextarea value="#{OptionsPage.fileStudyIds}" rows="8" cols="80"/>
                                                    <div class="dvnFormPadding">
                                                        <ice:commandButton value="Determine File Types for Studies" action="#{OptionsPage.determineFileTypeForStudies_action}"/>
                                                    </div>
                                                </div>
                                            </ice:panelGroup>         
                                        </ice:panelTab> 
                                         <ice:panelTab id="importOptions" label="Import"  rendered="#{VDCSession.loginBean.networkAdmin}">
                                            <ice:panelGroup styleClass="dvnUtilitiesTable" >
                                                <ice:messages id="importMessage" styleClass="errorMessage"/>
                                                <ice:outputText value="Select the file format and the dataverse for the import, then either:"/>
                                                <div>
                                                <ice:selectOneMenu value="#{OptionsPage.importFileFormat}">
                                                    <f:selectItems value="#{OptionsPage.importFileFormatTypes}"/>
                                                </ice:selectOneMenu>
                                                <ice:selectOneMenu value="#{OptionsPage.importDVId}">
                                                    <f:selectItems value="#{OptionsPage.importDVs}"/>
                                                </ice:selectOneMenu>
                                                </div>
                                                <hr/>
                                                <ice:outputText value="a) Batch import - input directory and click on the button:"/>
                                                <div>
                                                <ice:inputText value="#{OptionsPage.importBatchDir}" size="80"/>
                                                <ice:commandButton value="Batch Import" action="#{OptionsPage.importBatch_action}"/>
                                                </div>
                                                <hr/>
                                                <ice:outputText value="or b) Single import - browse for the file and click on the button:"/>
                                                <div>
                                                    <!-- Commenting out the InputFile section: - L.A.
                                                <ice:inputFile id="inputImportFileComponent" label="Upload"
                                                                action="#{UtilitiesPage.uploadFile}" binding="#{UtilitiesPage.inputFile}"
                                                                progressListener="#{UtilitiesPage.fileUploadProgress}"
                                                                accept="#{UtilitiesPage.importDVId}, #{UtilitiesPage.importFileFormat}">
                                                </ice:inputFile>
                                                    L.A. -->
                                                    <ace:fileEntry id="inputImportFileComponent"
                                                        relativePath="/temp/" 
                                                        maxFileCount="1" 
                                                        maxFileCountMessage="Limited to 1 file upload only (for now)" 
                                                        fileEntryListener="#{OptionsPage.uploadFileListener}" 
                                                        maxFileSize="2147483648" 
                                                        maxFileSizeMessage="Submitted file is too large." 
                                                        maxTotalSize="2147483648" 
                                                        maxTotalSizeMessage="Total size of submitted files is too large." 
                                                        useOriginalFilename="true" 
                                                        useSessionSubdir="false"/>
                                                    <span class="top">
                                                        <h:commandButton styleClass="submit" type="submit" value="Upload File"/>
                                                    </span>
                                                <div class="dvnFormPadding">
                                                    <ice:commandButton value="Single Import" id="buttonEV"
                                                                    action="#{OptionsPage.importSingleFile_action}"/>
                                                </div>
                                                <ice:message for="inputImportFileComponent"/>
                                                <!-- Progress display for the old-style import:
                                                <ice:outputProgress
                                                    value="#{UtilitiesPage.fileProgress}">
                                                </ice:outputProgress>
                                                L.A. -->
                                                </div>
                                            </ice:panelGroup>       
                                        </ice:panelTab>
                                        <ice:panelTab id="deleteOptions" label="Delete"  rendered="#{VDCSession.loginBean.networkAdmin}">
                                            <ice:panelGroup styleClass="dvnUtilitiesTable" >
                                                <ice:messages id="deleteMessage" styleClass="errorMessage"/>
                                                <ice:outputText value="To delete arbitrary studies, input the study ids and click on the button below:"/>
                                                <div>
                                                <ice:inputTextarea value="#{OptionsPage.deleteStudyIds}" rows="8" cols="80"/>
                                                <div class="dvnFormPadding">
                                                    <ice:commandButton value="Delete Studies" action="#{OptionsPage.deleteStudies_action}"
                                                                    onclick="if(!confirm('Please confirm this DELETE request. This change CANNOT be undone.')){ return false; };"/>
                                                </div>
                                                </div>
                                            </ice:panelGroup>         
                                        </ice:panelTab> 
                                        <ice:panelTab id="handleOptions" label="Handle"  rendered="#{VDCSession.loginBean.networkAdmin}">
                                            <ice:panelGroup styleClass="dvnUtilitiesTable">
                                                <ice:messages id="handleMessage" styleClass="errorMessage"/>
                                                <ice:outputText value="To register all unregistered handles, click on the button below:"/>
                                                <div>
                                                <ice:commandButton value="Register All" action="#{OptionsPage.handleRegisterAll_action}"/>
                                                </div>
                                                <hr/>
                                                <ice:outputText value="To re-register all registered handles, click on the button below:"/>
                                                <div>
                                                <ice:commandButton value="Fix Handles" action="#{OptionsPage.handleFixAll_action}"/>
                                                </div>
                                                <hr/>
                                                <ice:outputText value="To re-register a single handle, enter the global id and click on the button below:"/>
                                                <div>
                                                <ice:inputText value="#{OptionsPage.fixGlobalId}" size="6"/>
                                                <ice:commandButton value="Fix Handle" action="#{OptionsPage.handleFixSingle_action}"/>
                                                </div>
                                                <hr/>
                                                <ice:outputText value="To check the Handle registration status of a range of studies, enter the range of db ids and click below:"/>
                                                <div>
                                                <ice:inputText value="#{OptionsPage.studyIdRange}" size="12"/>
                                                <ice:commandButton value="Check Handles" action="#{OptionsPage.handleCheckRange_action}"/>
                                                <ice:inputTextarea value="#{OptionsPage.handleCheckReport}" rows="8" cols="32" readonly="true" rendered="#{! empty OptionsPage.handleCheckReport}"/>
                                                </div>
                                            </ice:panelGroup>       
                                        </ice:panelTab> 
                                        <ice:panelTab id="studyOptions" label="Study"  rendered="#{VDCSession.loginBean.networkAdmin}">
                                            <ice:panelGroup styleClass="dvnUtilitiesTable" >
                                                <ice:column>
                                                    <ice:messages id="studyMessage" styleClass="errorMessage"/>
                                                    <ice:outputText value="To create draft versions of studies, input the study ID's and click on the button below. Note: If the study already has a draft (or in review) version, that study will be ignored:"/>
                                                    <div>
                                                    <ice:inputTextarea value="#{OptionsPage.createStudyDraftIds}" rows="8" cols="80"/>
                                                    <div class="dvnFormPadding">
                                                        <ice:commandButton value="Create Drafts" action="#{OptionsPage.createStudyDrafts_action}"/>
                                                    </div>
                                                    </div>
                                                </ice:column>
                                            </ice:panelGroup>        
                                        </ice:panelTab>
                                    </ice:panelTabSet>
                                </div>                  
                        </ice:panelTab>
                    </ice:panelTabSet>
                </div>
            </ice:form>
        </ui:define>
    </ui:composition>
</body>
</html>
