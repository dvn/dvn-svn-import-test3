<div xmlns:ui="http://java.sun.com/jsf/facelets"
     xmlns:h="http://java.sun.com/jsf/html"
     xmlns:f="http://java.sun.com/jsf/core"
     xmlns:jsp="http://java.sun.com/JSP/Page"
     xmlns:ice="http://www.icesoft.com/icefaces/component"
     xmlns:dvn="/WEB-INF/tlds/dvn-components"
     class="dvnsetupdataexloprationformblock">

    <div class="dvnFormPadding dvnFormMargin" style="float:right;">

        <ice:commandButton type="submit" value="Update" action ="#{SetUpDataExplorationPage.saveFilterFragment}"
                           visible="#{SetUpDataExplorationPage.editFilterGroup}"/>
        <ice:commandButton type="submit" value="Cancel" action ="#{SetUpDataExplorationPage.cancelFragment}"
        visible="#{SetUpDataExplorationPage.editFilterGroup}"/>
        <ice:commandButton type="submit" value="Update" action ="#{SetUpDataExplorationPage.saveFilterGrouping}"
                           visible="#{SetUpDataExplorationPage.editFilterGrouping or SetUpDataExplorationPage.manageFilterTypes}"/>
        <ice:commandButton type="submit" value="Cancel" action="#{SetUpDataExplorationPage.cancelFragment}"
                           visible="#{SetUpDataExplorationPage.editFilterGrouping or SetUpDataExplorationPage.manageFilterTypes}"/>
    </div>

    <div jsfc="ice:panelGroup" style="margin-bottom:1em;" >
        <ice:outputLabel value="Filter"
                         rendered="#{SetUpDataExplorationPage.editFilterGroup}"
                         visible="#{SetUpDataExplorationPage.editFilterGroup}"/>
                 <ice:inputText id="input_filterGroupName"
                                visible="#{SetUpDataExplorationPage.editFilterGroup}"
                                rendered="#{SetUpDataExplorationPage.editFilterGroup}"
                        
                        size="25"
                        maxlength="255"
                        binding="#{SetUpDataExplorationPage.inputFilterGroupName}"/>

    </div>


    <div jsfc="ice:panelGroup" style="margin-bottom:1em;" >
        <ice:outputLabel value="Group"
                         rendered="#{SetUpDataExplorationPage.editFilterGrouping}"
                         visible="#{SetUpDataExplorationPage.editFilterGrouping}"/>
               <ice:inputText id="input_groupingName"
                              rendered="#{SetUpDataExplorationPage.editFilterGrouping}"
                              
                    size="25"
                    maxlength="255"
                    binding="#{SetUpDataExplorationPage.inputFilterGroupingName}"/>
    </div>


    <div jsfc="ice:panelGroup" rendered="#{SetUpDataExplorationPage.editFilterGroup  or SetUpDataExplorationPage.manageFilterTypes }">
       <ice:commandLink   type="submit"
          action="#{SetUpDataExplorationPage.addFilterTypeButton}" visible="#{!SetUpDataExplorationPage.addFilterType}">
          <ice:outputText  value="Add Filter Type"/>
        </ice:commandLink>
             <ice:outputLabel value="Name" visible="#{SetUpDataExplorationPage.addFilterType}"/>

         <ice:inputText id="input_addFilterType"
                        visible="#{SetUpDataExplorationPage.addFilterType}"
                        size="25"
                        maxlength="255"
                        binding="#{SetUpDataExplorationPage.inputFilterGroupTypeName}"/>
           <ice:commandLink    type="submit"
          action="#{SetUpDataExplorationPage.saveFilterTypeButton}" visible="#{SetUpDataExplorationPage.addFilterType}">
          <ice:outputText  value="Save Filter Type"/>
        </ice:commandLink>
           <ice:commandLink      type="submit"
          action="#{SetUpDataExplorationPage.cancelFilterTypeButton}" visible="#{SetUpDataExplorationPage.addFilterType}">
          <ice:outputText  value="Cancel"/>
        </ice:commandLink>

     </div>

        <ice:dataTable width="100%" cellspacing="0" cellpadding="0" var="type" value="#{SetUpDataExplorationPage.editFilterVarGrouping.varGroupTypesUI}"
                       rendered="#{SetUpDataExplorationPage.manageFilterTypes}"
              binding="#{SetUpDataExplorationPage.dataTableManageFilterGroupType}">

              <h:column>
                   <f:facet name="header">
                          <ice:outputText value="Name"/>
                   </f:facet>
                   <ice:outputText value="#{type.varGroupType.name}" rendered="#{!type.editMode}"/>
                        <ice:inputText
                            rendered="#{type.editMode}"
                            size="25"
                            maxlength="255"
                            binding="#{SetUpDataExplorationPage.editManageFilterGroupTypeName}"/>
              </h:column>
              <h:column>
                    <f:facet name="header">
                        <ice:outputText value="Actions"/>
                    </f:facet>
                    <ice:commandLink 
                        visible="#{!type.editMode}"
                        actionListener="#{SetUpDataExplorationPage.editFilterType}">
                        <ice:outputText  value="Edit"/>
                    </ice:commandLink>
                    <ice:commandLink 
                         visible="#{type.editMode}"
                         actionListener="#{SetUpDataExplorationPage.saveFilterType}">
                         <ice:outputText  value="Save"/>
                    </ice:commandLink>
                    <ice:commandLink 
                               visible="#{!type.editMode}"
                               actionListener="#{SetUpDataExplorationPage.deleteFilterGroupType}">
                               <ice:outputText  value="Delete"/>
                    </ice:commandLink>
                </h:column>
         </ice:dataTable>

    <ice:dataTable width="100%" cellspacing="0" cellpadding="0" var="type" value="#{SetUpDataExplorationPage.editFilterVarGroup.varGroupTypes}"
                           rendered="#{SetUpDataExplorationPage.editFilterGroup}"
              binding="#{SetUpDataExplorationPage.dataTableFilterGroupType}">
            <ice:column rendered="#{SetUpDataExplorationPage.editFilterGroup}">
                <f:facet name="header">
                    <ice:outputText value="Select"/>
                </f:facet>
                <ice:selectBooleanCheckbox  styleClass="filterVariableCheckBoxes"
                                            partialSubmit="false" value="#{type.selected}"/>
            </ice:column>
              <h:column>
                   <f:facet name="header">
                          <ice:outputText value="Name"/>
                   </f:facet>
                   <ice:outputText value="#{type.varGroupType.name}" rendered="#{!type.editMode}"/>
                        <ice:inputText
                            visible="#{type.editMode}"
                            
                            size="25"
                            maxlength="255"
                            binding="#{SetUpDataExplorationPage.editFilterGroupTypeName}"/>
              </h:column>
              <h:column>
                    <f:facet name="header">
                        <ice:outputText value="Actions"/>
                    </f:facet>
                    <ice:commandLink
                        visible="#{!type.editMode}"
                        actionListener="#{SetUpDataExplorationPage.editFilterType}">
                        <ice:outputText  value="Edit"/>
                    </ice:commandLink>
                    <ice:commandLink
                         visible="#{type.editMode}"
                         actionListener="#{SetUpDataExplorationPage.saveFilterType}">
                         <ice:outputText  value="Save"/>
                    </ice:commandLink>
                    <ice:commandLink
                               visible="#{!type.editMode}"
                               actionListener="#{SetUpDataExplorationPage.deleteFilterGroupType}">
                               <ice:outputText  value="Delete"/>
                    </ice:commandLink>
                </h:column>
         </ice:dataTable>
    
    <div jsfc="ice:panelGroup">
         <ice:outputLabel value="Filter Variables" visible="#{SetUpDataExplorationPage.editFilterGroup}"/>

         <ice:inputText
              visible="#{SetUpDataExplorationPage.editFilterGroup}"
              size="25"
              maxlength="255"
              onkeyup="delayedRequest(form,this,event);"
              valueChangeListener="#{SetUpDataExplorationPage.updateFilterVariableList}"
              binding="#{SetUpDataExplorationPage.inputVariableFilter}"/>
         
         <ice:dataTable width="100%" cellspacing="0" cellpadding="0" id="genericVariables" var="dataVariableUI" 
                        rendered="#{SetUpDataExplorationPage.editFilterGroup}"
                        value="#{SetUpDataExplorationPage.dvGenericListUI}">
            <ice:column>
                <f:facet name="header">
                     <ice:selectBooleanCheckbox id="checkAllFilterVars"
                          partialSubmit="true"
                          binding="#{SetUpDataExplorationPage.filterCheckBox}"
                          valueChangeListener="#{SetUpDataExplorationPage.selectAllFilterVariables}"
                                                        />
                </f:facet>
                <ice:selectBooleanCheckbox id="filterVariableCheckbox" styleClass="filterVariableCheckBoxes"
                                           partialSubmit="false" value="#{dataVariableUI.selected}"
                                           visible="#{dataVariableUI.display}"/>
            </ice:column>
            <ice:column>
                <f:facet name="header">
                    <ice:outputText value="Name"/>
                </f:facet>
                <ice:outputLabel value="#{dataVariableUI.dataVariable.name}"
                                 visible="#{dataVariableUI.display}"/>
            </ice:column>
        </ice:dataTable>
    </div>

</div>
