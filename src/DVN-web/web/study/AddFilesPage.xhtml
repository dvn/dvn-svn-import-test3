<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:gui="http://java.sun.com/jsf/facelets"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core" 
      xmlns:jsp="http://java.sun.com/JSP/Page"
      xmlns:ice="http://www.icesoft.com/icefaces/component"
      xmlns:ui="http://www.sun.com/web/ui"
      >
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>

    </head>

    <body>
        <gui:composition template="/template.xhtml">

<gui:param name="pageTitle" value="DVN - Add Files" />

  <gui:define name="body">

    <ice:form>
        <ice:inputFile id="inputFileComponent" 
            progressListener="#{AddFilesPage.fileUploadProgress}" 
            actionListener="#{AddFilesPage.uploadFile}" />
        <ice:message for="inputFileComponent" />
        <ice:outputProgress 
            label="Uploading"
            value="#{AddFilesPage.fileProgress}" />        
 <h:messages layout="table" globalOnly="false" 
                  showDetail="true" showSummary="true"/>
        

    </ice:form>
<br/>
 <ice:form>
        <!--
            This is a very basic table comprising four columns. Each
            row represents an inventory item.  Each column represents a
            inventory item property.  commandSortHeader components have been
            added ot the table headers.

            The sortAscending and sortColumn attributes are set when a command
            sortColumnName header is activated.  The sortColumn and sortAscending
            data can then be sortColumnName by a sortColumnName algorithm if a
            change is detected.
        -->
          <ice:dataTable
                width="550px"
                value="#{AddFilesPage.fileList}"
                var="file">
            <ice:column>
                <f:facet name="header">
                    <ice:outputLabel
                            value="File Name"/>
                </f:facet>
                <ice:inputText id="input_filename" size="30" value="#{file.fileName}" required="true" validator="#{AddFilesPage.validateFileName}" />
                   <f:param name="fileName" value="#{file.fileName}"/>
            </ice:column>
   <ice:column>
                <f:facet name="header">
                    <ice:outputLabel
                            value="Category"/>
                </f:facet>
                <ice:inputText id="category_filename" size="30" value="#{file.fileCategoryName}" />
            </ice:column>  
            <ice:column>
                <f:facet name="header">
                    <ice:outputLabel
                            value="Description"/>
                </f:facet>
                <ice:inputTextarea id="description_filename"  rows="2" value="#{file.fileDescription}" />
               
            </ice:column>

            <ice:column>
                <f:facet name="header">
                    <ice:outputLabel
                            value="Size"/>
                </f:facet>
                <ice:outputText value="#{file.sizeFormatted}"/>
            </ice:column>
          <ice:column>
                <f:facet name="header">
                    <ice:outputText
                            value="Remove"/>
                </f:facet>
                <ice:commandLink
                        value="Remove"
                        actionListener="#{AddFilesPage.removeUploadedFile}">
                    <f:param name="fileName" value="#{file.fileName}"/>
                </ice:commandLink>
            </ice:column> 
        </ice:dataTable>
    </ice:form>
</gui:define>
    </gui:composition>
    </body>
    </html>
