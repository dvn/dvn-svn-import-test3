<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:gui="http://java.sun.com/jsf/facelets"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core" 
      xmlns:jsp="http://java.sun.com/JSP/Page"
      xmlns:dvn="/WEB-INF/tlds/dvn-components"
      xmlns:ice="http://www.icesoft.com/icefaces/component"
      >
<head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
         
</head>

<body>
<gui:composition template="/template.xhtml">

<gui:param name="pageTitle" value="DVN - Home" />

  <gui:define name="body">
      <f:loadBundle basename="Bundle" var="bundle"/>
     <f:loadBundle basename="BundleAnalysis" var="bundleAnalysis"/>
                        
         <ice:form>
           <h:inputHidden id="vdcId" value="#{VDCRequest.currentVDCId}"/>
           <!-- Success Message -->
         <div jsfc="ice:panelGroup" styleClass="#{HomePage.msg.styleClass}" rendered="#{!empty HomePage.msg.messageText}">
           <h:outputText id="statusMessage" escape="false" value="#{HomePage.msg.messageText}" />
         </div>
       
           <div jsfc="ice:panelGroup" styleClass="dvn_hmpgMainMessage"  rendered="#{(VDCRequest.vdcNetwork.displayAnnouncements == true) and (VDCRequest.currentVDC == null) }" id="networkAnnouncementsHeaderPanel" >
                <h:outputText id="networkAnnouncementsMessages" escape="false" value="#{HomePage.parsedNetworkAnnouncements}"/>
            </div>
            
            <div jsfc="ice:panelGroup" styleClass="dvn_hmpgMainMessage" rendered="#{VDCRequest.currentVDC.displayAnnouncements == true}" id="announcementsHeaderPanel" >
                <h:outputText rendered="#{VDCRequest.currentVDC.displayAnnouncements == true}" escape="false" value="#{HomePage.parsedLocalAnnouncements}"/>
            </div>
      
         <!-- Main Section starts here -->
         <div id="dvn_mainSection">
              <div id="dvn_mainSectionTitle">
              <h:outputText value="Dataverses" rendered="#{VDCRequest.currentVDC == null}"/>
              <h:outputText value="Studies" rendered="#{VDCRequest.currentVDC != null}" />
              </div>
      
              <div jsfc="ice:panelGroup" id="createDataverse"  styleClass="requestHmpgSide" rendered="#{HomePage.showRequestCreator}">
                  <h:outputLink styleClass="requestHmpgSideLink"  value="/dvn/login/CreatorRequestInfoPage.xhtml">
                           <h:outputText value="Create your own Dataverse" escape="false"/>
                  </h:outputLink>
                 
              </div>
              
               <div jsfc="ice:panelGroup" id="beContributor"  styleClass="requestHmpgSide" rendered="#{HomePage.showRequestContributor}">
                    <h:outputLink styleClass="requestHmpgSideLink"  value="/dvn/dv/#{VDCRequest.currentVDC.alias}/login/ContributorRequestInfoPage.xhtml">
                        <h:outputText value="Become a Contributor" escape="false"/>
                    </h:outputLink>
                
              </div>

              <!-- Search Section starts here -->                                       
              <div class="dvn_searchblock">
                    <div class="dvn_searchBoxContent">
                    <div class="dvn_searchTitle"><a name="search" title="">Search</a></div>
                    <fieldset>
                        <label for="options">
                            <h:selectOneMenu id="dropdown1" value="#{HomePage.searchField}">
                                <f:selectItem itemLabel="Cataloging Information" itemValue="any" />
                                <f:selectItem itemLabel="- Author" itemValue="authorName" />
                                <f:selectItem itemLabel="- Title" itemValue="title" />
                                <f:selectItem itemLabel="- Study ID" itemValue="studyId" />
                                <f:selectItem itemLabel="Variable Information" itemValue="variable" />
                            </h:selectOneMenu>
                        </label>
                        <label for="search">
                            <h:inputText onkeypress="if (window.event) return processEvent('', 'form1:searchButton'); else return processEvent(event, 'form1:searchButton');" id="textField2" value="#{HomePage.searchValue}"/>
                        </label>
                        <label for="button">
                            <h:commandButton id="searchButton" value="Go" type="submit" action="#{HomePage.search_action}"/>                        
                        </label>
                    </fieldset>
                    <div class="dvn_searchLinks">
                        <h:outputLink value="/dvn#{VDCRequest.currentVDCURL}/faces/AdvSearchPage.xhtml">
                            <h:outputText value="Advanced Search"/>
                        </h:outputLink>
                        <h:outputText value=" | " escape="true"/>
                        <h:outputLink value="http://thedata.org/guides/users/search/tips" target="_blank" style="margin: 0;">
                            <h:outputText value="Tips"/>
                        </h:outputLink>
                    </div>
                </div>
            </div>
            <!-- Search Section ends here -->
            
      </div>
        <!-- Main Section ends here -->
        <!-- ***************** NETWORK HOMEPAGE CONTENT *************************  --> 
    <ice:panelSeries styleClass="dvn_networkHomePanel" 
                    value="#{dvRecordsManager.itemBeans}" 
                    var="dvItems" 
                    rendered="#{VDCRequest.currentVDC == null}">
                    
        <div jsfc="ice:panelGroup" rendered="#{not empty(dvItems.childItems) }" styleClass="header">
                <h1 class="header">
                    <ice:outputText value="#{dvItems.name}" />
                </h1>
                <ice:commandLink immediate="true" action="#{dvItems.toggleSubGroupAction}">
                    <ice:graphicImage style="border:0px solid; vertical-align:middle;" value="#{dvItems.expandContractImage}"/>
                </ice:commandLink>
        </div>
        <!-- Start Browse section (with side panels, if available) -->
        <div>
        <div jsfc="ice:panelGroup" rendered="#{not empty(dvItems.childItems)and VDCRequest.currentVDC == null }" styleClass="left">
            <p>
              <!-- Network Homepage -->
                <!-- datalist component for NETWORK HOME PAGE -->
                        <h:outputText escape="false" value="#{HomePage.networkData}"/>
              <!-- THE DV GROUPS AND DVS GO HERE -->
              
               </p>
        </div>
        <div align="right" jsfc="ice:panelGroup" rendered="#{not empty(dvItems.childItems) }" styleClass="dataPaginator">
            <ice:dataPaginator id="dataScroll_3"
                               for="dataverseList"
                               paginator="true"
                               fastStep="3"
                               paginatorMaxPages="4">
                <f:facet name="first">
                    <ice:graphicImage
                        url="./xmlhttp/css/xp/css-images/arrow-first.gif"
                        style="border:none;"
                        title="First Page"/>
                </f:facet> 
                <f:facet name="previous">
                    <ice:graphicImage
                        url="./xmlhttp/css/xp/css-images/arrow-previous.gif"
                        style="border:none;"
                        title="Previous"/>
                </f:facet>
                <f:facet name="next">
                    <ice:graphicImage
                        url="./xmlhttp/css/xp/css-images/arrow-next.gif"
                        style="border:none;"
                        title="Previous"/>
                </f:facet>
                <f:facet name="last">
                    <ice:graphicImage
                        url="./xmlhttp/css/xp/css-images/arrow-last.gif"
                        style="border:none;"
                        title="Previous"/>
                </f:facet>

            </ice:dataPaginator>
        </div>
        </div>
        <div jsfc="ice:panelGroup" rendered="#{not empty(dvItems.childItems) }" styleClass="content">
            <ice:dataTable headerClass="groupRow" 
                                id="dataverseList"
                                rendered="#{not empty(dvItems.childItems) }"
                                rowClasses="evenRow oddRow"
                                rows="5"
                                sortColumn="#{dvItems.sortColumnName}"
                                sortAscending="#{dvItems.ascending}"
                                styleClass="dvn_networkHomePanelInner"
                                value="#{dvItems.childItems}" 
                                var="item" 
                                width="100%">
                <!-- name number -->
                <f:facet name="header">

                </f:facet>
                <ice:column style="width:35%">
                    <f:facet name="header">
                        <ice:commandSortHeader
                            columnName="#{dvItems.nameColumnName}"
                            arrow="true">
                            <ice:outputText value="#{dvItems.nameColumnName}"/>
                        </ice:commandSortHeader>
                    </f:facet>
                    <ice:outputLink id="hideShow" value="javascript:void(0);" style="display:inline;float:right;" onclick="getNextSibling(this);">
                        <ice:outputText id="more_info" value="More Info"/>
                    </ice:outputLink>
                    <ice:outputLink id="dataverse_link" value="/dvn/dv/#{item.alias}">
                        <ice:outputText  value="#{item.name}"/>
                    </ice:outputLink>
                    <div id="hideShow_description" style="display:none; width:400px; z-Index:500;">
                        <ice:outputText value="#{item.dvnDescription}"/>
                    </div>
                </ice:column>
                <!-- affiliation -->
                <ice:column style="width:35%">
                    <f:facet name="header">
                        <ice:commandSortHeader
                            columnName="#{dvItems.affiliationColumnName}"
                            arrow="true">
                            <ice:outputText value="#{dvItems.affiliationColumnName}"/>
                        </ice:commandSortHeader>
                    </f:facet>
                    <ice:outputText value="#{item.affiliation}"/>
                </ice:column>

                <!-- DateReleased  -->
                <ice:column style="width:10%">
                    <f:facet name="header">
                        <ice:commandSortHeader
                            columnName="#{dvItems.dateReleasedColumnName}"
                            arrow="true">
                            <ice:outputText value="#{dvItems.dateReleasedColumnName}"/>
                        </ice:commandSortHeader>
                    </f:facet>
                    <ice:outputText value="#{item.releaseDate}"/>
                </ice:column>

                <!-- Last Update -->
                <ice:column style="width:10%">
                    <f:facet name="header">
                        <ice:commandSortHeader
                            columnName="#{dvItems.lastUpdatedColumnName}"
                            arrow="true">
                            <ice:outputText value="#{dvItems.lastUpdatedColumnName}"/>
                        </ice:commandSortHeader>
                    </f:facet>
                    <ice:outputText value="#{item.lastUpdateTime}"/>
                </ice:column>

                <!-- Activity -->
                <ice:column style="width:10%">
                    <f:facet name="header">
                        <ice:commandSortHeader
                            columnName="#{dvItems.activityColumnName}"
                            arrow="true">
                            <ice:outputText value="#{dvItems.activityColumnName}"/>
                        </ice:commandSortHeader>
                    </f:facet>
                    <div class="activity">
                        <div jsfc="ice:panelLayout" styleClass="#{item.activity}">
                            <span class="numbervalue">0</span>
                        </div>
                    </div>
                   

                   <!-- <ice:outputText value="#{item.activity}"/> -->
                </ice:column>
            </ice:dataTable>
            <ice:dataPaginator id="dataScroll_2" for="dataverseList"
                               rowsCountVar="rowsCount"
                               displayedRowsCountVar="displayedRowsCount"
                               firstRowIndexVar="firstRowIndex"
                               lastRowIndexVar="lastRowIndex"
                               pageCountVar="pageCount"
                               pageIndexVar="pageIndex">
                <ice:outputFormat
                    styleClass="standard"
                    value="{0} dataverses found, displaying {1} dataverse(s), from {2} to {3}. Page {4} / {5}.">
                    <f:param value="#{rowsCount}"/>
                    <f:param value="#{displayedRowsCount}"/>
                    <f:param value="#{firstRowIndex}"/>
                    <f:param value="#{lastRowIndex}"/>
                    <f:param value="#{pageIndex}"/>
                    <f:param value="#{pageCount}"/>
                </ice:outputFormat>
            </ice:dataPaginator>
        </div>
    </ice:panelSeries>
            <ice:messages></ice:messages>
            <!-- Dataverse Homepage -->
            
            
                    <!-- This is temporary until Dataverse homepage ans search results page are changed -->
            
               <h:outputLink value="/dvn/dv/#{VDCRequest.currentVDC.alias}/faces/SearchPage.xhtml?mode=1&amp;collectionId=#{VDCRequest.currentVDC.rootCollection.id}" rendered="#{VDCRequest.currentVDC != null}">
                    <h:outputText value="#{VDCRequest.currentVDC.name} Dataverse - Study Listing (temporary link)" />
                </h:outputLink>
           
</ice:form>
        

          </gui:define>
        </gui:composition>
    </body>
</html>