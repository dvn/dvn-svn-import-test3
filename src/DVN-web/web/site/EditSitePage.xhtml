<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:gui="http://java.sun.com/jsf/facelets"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core" 
      xmlns:jsp="http://java.sun.com/JSP/Page"
       xmlns:ice="http://www.icesoft.com/icefaces/component"
      >
<head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>

</head>

<body>
<gui:composition template="/template.xhtml">

<gui:param name="pageTitle" value="DVN - Dataverse General Settings" />

  <gui:define name="body">

                          
        <h:form binding="#{EditSitePage.form1}" id="form1">
           <script type="text/javascript">
               //<![CDATA[
                 function changeValue(obj) {
                    if (window.event)
                        obj.value = window.event.srcElement.value;
                        showAll();
                        document.getElementById('form1').submit();
                }
                 
                //init the hidden fields
                 function showAll(){
                    var theForm = document.getElementById('form1');
                    var showScholarFields = false;
                    for (var i = 0; i < theForm.elements.length; i++) {
                        if ( (theForm.elements[i].checked) && (theForm.elements[i].value == "Scholar") ) {
                            showScholarFields = true;
                            document.getElementById('form1:firstnameLabel').style.display = 'block';
                            document.getElementById('form1:lastnameLabel').style.display = 'block';
                            document.getElementById('form1:firstName').style.display = 'block';
                            document.getElementById('form1:lastName').style.display = 'block';
                            break;
                        }
                    }
                    if (!showScholarFields) {
                        document.getElementById('form1:firstnameLabel').style.display = 'none';
                        document.getElementById('form1:lastnameLabel').style.display = 'none';
                        document.getElementById('form1:firstName').style.display = 'none';
                        document.getElementById('form1:lastName').style.display = 'none';
                    }
                }
                
                function createDvName() {
                    if (document.getElementById('form1:firstName').value != "" && document.getElementById('form1:lastName').value != "") {
                        document.getElementById('form1:dataverseName').value = document.getElementById('form1:firstName').value + " " + document.getElementById('form1:lastName').value;
                    }
                }
                 // ]]>
            </script>
             
             <div class="dvn_section">
                 <div class="dvn_sectionTitle">
                     
                         <h:outputText binding="#{EditSitePage.outputText1}" value="Dataverse General Settings"/>
                      
                 </div>            
                 <div class="dvn_sectionBox"> 
                     <div class="dvn_margin12">
                         
                         <h:inputHidden id="vdcId" value="#{VDCRequest.currentVDCId}"/>
                         <div jsfc="ice:panelGroup" styleClass="#{EditSitePage.msg.styleClass}" rendered="#{!empty EditSitePage.msg.messageText}">
                             <h:outputText id="statusMessage" value="#{EditSitePage.msg.messageText}" /> 
                         </div>
                         
                         <div style="padding-left: 20px; padding-right: 30px">
                             <h:graphicImage alt="Information" title="Information" styleClass="vdcNoBorders" style="vertical-align: bottom" value="/resources/icon_info.gif" />
                             <h:outputText binding="#{EditSitePage.outputText2}" id="outputText2" styleClass="vdcHelpText" value="Note that if you change the alias, links to this Dataverse will change (http//.../dv/'alias')."/>
                         </div>
                         <h:panelGrid binding="#{EditSitePage.gridPanel1}" cellpadding="0" cellspacing="0"
                                      columnClasses="vdcAddSiteCol1, vdcAddSiteCol2" columns="2" id="gridPanel1" style="margin-top: 30px; margin-bottom: 30px">
                             <div jsfc="ice:panelGroup"  style="vertical-align: top;">
                                <h:outputLabel for="dataverseOption" id="dataverseLabel">
                                    <h:outputText style="white-space: nowrap; padding-right: 10px; " value="Type of Dataverse"/>                                              
                                </h:outputLabel>
                            </div>
                            <!-- Developed for 16a, but not used pending a solution for cast up from scholar dv to VDC -->
                            <div jsfc="ice:panelGroup"  style="vertical-align: top;">
                                <h:selectOneRadio id="dataverseOption" 
                                                    layout="pageDirection" 
                                                    immediate="true"
                                                    onclick="changeValue(this);"
                                                    valueChangeListener="#{AddSitePage.changeDataverseOption}"
                                                    value="#{EditSitePage.dataverseType}">
                                    <f:selectItems value="#{AddSitePage.dataverseOptions}"/>
                                </h:selectOneRadio>
                            </div>
                            
                            <!-- first name -->
                            <div jsfc="ice:panelGroup"  style="vertical-align: top;">
                                <h:outputLabel for="firstName" id="firstnameLabel">
                                    <h:outputText style="white-space: nowrap; padding-right: 10px; " value="First Name"/>
                                    <h:graphicImage value="#{bundle.iconRequired}"/>
                                </h:outputLabel>
                            </div>
                            <div jsfc="ice:panelGroup"  style="vertical-align: top;">
                                <h:inputText id="firstName" 
                                                value="#{EditSitePage.firstName}" 
                                                valueChangeListener="#{EditSitePage.changeFirstName}" 
                                                validator="#{EditSitePage.validateIsEmpty}" 
                                                style="display:block;"/>
                                <h:message for="firstName" showSummary="true" showDetail="false" errorClass="errorMessage" styleClass="errorMessage"/>
                            </div>
                            <!-- last name -->
                            <div jsfc="ice:panelGroup"  style="vertical-align: top;">
                                <h:outputLabel for="lastName" id="lastnameLabel">
                                    <h:outputText style="white-space: nowrap; padding-right: 10px; " value="Last Name"/>  
                                    <h:graphicImage value="#{bundle.iconRequired}"/>
                                </h:outputLabel>
                            </div>
                            <div jsfc="ice:panelGroup"  style="vertical-align: top;">
                                <h:inputText id="lastName" 
                                                value="#{EditSitePage.lastName}" 
                                                valueChangeListener="#{EditSitePage.changeLastName}" 
                                                validator="#{EditSitePage.validateIsEmpty}"
                                                style="display:block;"/>
                                                
                                <h:message for="lastName" showSummary="true" showDetail="false" errorClass="errorMessage" styleClass="errorMessage"/>
                            </div>
                            <!-- affiliation -->
                            <div jsfc="ice:panelGroup"  style="vertical-align: top;">
                                <h:outputLabel for="affiliation" id="affiliationLabel">
                                    <h:outputText style="white-space: nowrap; padding-right: 10px; " value="Affiliation"/>                                              
                                </h:outputLabel>
                            </div>
                            <div jsfc="ice:panelGroup"  style="vertical-align: top;">
                                <h:inputText id="affiliation" 
                                                value="#{EditSitePage.affiliation}" 
                                                valueChangeListener="#{EditSitePage.changeAffiliation}" 
                                                />
                            </div>
                            <!-- dataverse name -->
                             <div jsfc="ice:panelGroup"  style="vertical-align: top;">
                                 <h:outputLabel binding="#{EditSitePage.componentLabel1}" for="componentLabel1" id="componentLabel1">
                                     <h:outputText binding="#{EditSitePage.componentLabel1Text}" id="componentLabel1Text" style="white-space: nowrap; padding-right: 10px; " value="Dataverse Name"/>
                                     <h:graphicImage value="#{bundle.iconRequired}"/>
                                 </h:outputLabel>
                             </div>
                             <div jsfc="ice:panelGroup">
                                 <h:inputText binding="#{EditSitePage.dataverseName}" 
                                                id="dataverseName" 
                                                required="true"
                                                requiredMessage="This field is required."
                                                size="60" 
                                                validator="#{EditSitePage.validateName}"
                                                value="#{VDCRequest.currentVDC.name}"/>
                                 <br />
                                 <h:outputText styleClass="vdcHelpText" value="Name used to refer to this dataverse in Dataverse Network Homepage and other pages."/>
                                 <h:message for="dataverseName" showSummary="true" showDetail="false" styleClass="errorMessage"/>
                             </div>
                             <div jsfc="ice:panelGroup"  style="vertical-align: top;">
                                 <h:outputLabel binding="#{EditSitePage.componentLabel2}" for="componentLabel2" id="componentLabel2">
                                     <h:outputText binding="#{EditSitePage.componentLabel2Text}" 
                                                    id="componentLabel2Text" 
                                                    style="white-space: nowrap; padding-right: 10px; " 
                                                    value="Dataverse Alias"/>
                                     <h:graphicImage value="#{bundle.iconRequired}"/>
                                 </h:outputLabel>
                             </div>
                             <div jsfc="ice:panelGroup">
                                 <h:inputText binding="#{EditSitePage.dataverseAlias}" 
                                            id="dataverseAlias" 
                                            required="true" 
                                            requiredMessage="This field is required."
                                            validator="#{EditSitePage.validateAlias}"
                                            value="#{VDCRequest.currentVDC.alias}"/>
                                <br />
                                 <h:outputText styleClass="vdcHelpText" value="Short name used to build the URL for this dataverse, e.g., http://.../dv/'alias'. It is case sensitive."/>
                                 <h:message for="dataverseAlias" showSummary="true" showDetail="false" styleClass="errorMessage"/>
                             </div>
                         </h:panelGrid>
                         <div jsfc="ice:panelGroup" binding="#{EditSitePage.groupPanel1}"  id="groupPanel1" style="padding-left: 160px">
                             <h:commandButton binding="#{EditSitePage.button1}" id="button1"  value="Save" action="#{EditSitePage.edit}"/>
                             <h:commandButton binding="#{EditSitePage.button2}" id="button2" style="margin-left: 20px" value="Cancel" action="#{EditSitePage.cancel}"/>
                         </div>
                         
                     </div>
                 </div>
             </div>
             <script type="text/javascript">
                  //<![CDATA[
                    // this is done to ensure that the scholar fields are properly inited. wjb
                    showAll();
                    // ]]>
            </script>
        </h:form>
            </gui:define>
        </gui:composition>
    </body>
</html>
